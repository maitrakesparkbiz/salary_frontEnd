"use strict";(self.webpackChunkexpense_manager=self.webpackChunkexpense_manager||[]).push([[565],{6565:(y,g,s)=>{s.r(g),s.d(g,{AuthModule:()=>M});var m=s(6895),u=s(1453),d=s(8540),t=s(8256),v=s(2930),p=s(7359),f=s(1406),n=s(433);let h=(()=>{class e{constructor(o,i,l,c,a){this.store=o,this.toastrService=i,this.loginServiceService=l,this.router=c,this.activatedRoute=a,this.count$=o.select("count")}ngOnInit(){this.activatedRoute.url.subscribe(o=>{"logout"==o[0].path&&this.logout()})}onSubmit(o){this.isLoginMode?this.loginServiceService.login(o.value).subscribe(i=>{i?(console.log(typeof i),this.store.dispatch((0,d.ZW)({user:i})),this.data$=this.store.select("count"),this.loginServiceService.user.next(i),this.token=Object.values(i.token),this.router.navigateByUrl("/Home"),localStorage.setItem("name",this.token),this.toastrService.success("successfully Login")):this.toastrService.error("Invalid Email or Password")}):this.loginServiceService.register(o.value).subscribe(i=>{this.isLoginMode=!this.isLoginMode,23e3==i?this.toastrService.error("Email already Exists"):this.toastrService.success("successfully Register")}),o.reset()}onSwitchMode(){this.isLoginMode=!this.isLoginMode}logout(){this.loginServiceService.user.subscribe(o=>o),this.store.dispatch((0,d.ZW)({user:{}})),this.data$=this.store.select("count"),localStorage.removeItem("name"),localStorage.clear(),this.router.navigateByUrl("auth/login"),this.toastrService.success(" Logout Successfully")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v.yh),t.Y36(p._W),t.Y36(f.N),t.Y36(u.F0),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"h-100","d-flex","align-items-center","justify-content-center"],[1,"col-xs-12","col-md-6","col-md-offset-3"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){if(1&o){const l=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"br")(2,"br"),t.TgZ(3,"div",1)(4,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(l);const a=t.MAs(5);return t.KtG(i.onSubmit(a))}),t.TgZ(6,"div",4)(7,"label",5),t._uU(8,"E-Mail"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",4)(11,"label",7),t._uU(12,"Password"),t.qZA(),t._UZ(13,"input",8),t.qZA(),t.TgZ(14,"div")(15,"button",9),t._uU(16),t.qZA(),t._uU(17," | "),t.TgZ(18,"button",10),t.NdJ("click",function(){return i.onSwitchMode()}),t._uU(19),t.qZA()()()()()}if(2&o){const l=t.MAs(5);t.xp6(15),t.Q6J("disabled",!l.valid),t.xp6(1),t.Oqu(i.isLoginMode?"Login":"SignUp"),t.xp6(3),t.hij("Switch to ",i.isLoginMode?"SignUp":"Login","")}},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.wO,n.on,n.On,n.F]}),e})();const S=[{path:"login",component:h},{path:"logout",component:h}];let b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(S),u.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,b,n.u5]}),e})()}}]);